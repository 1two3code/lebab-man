{"version":3,"sources":["pacman/_BaseState.ts"],"names":["pacman","pacman._BaseState","pacman._BaseState.constructor","pacman._BaseState.INPUT_REPEAT_MILLIS","pacman._BaseState.handleDefaultKeys","pacman._BaseState._updateSpriteFrames"],"mappings":"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","file":"pacman/_BaseState.js","sourcesContent":["module pacman {\r\n\t'use strict';\r\n\r\n\texport class _BaseState extends gtp.State {\r\n\r\n\t\tprivate _lastConfigKeypressTime: number;\r\n\t\tprotected _lastSpriteFrameTime: number;\r\n\r\n\t\t/**\r\n\t\t * Functionality common amongst all states in this game.\r\n\t\t * @constructor\r\n\t\t */\r\n\t\tconstructor(args?: gtp.Game | gtp.BaseStateArgs) {\r\n\t\t\tsuper(args);\r\n\t\t\tthis._lastConfigKeypressTime = gtp.Utils.timestamp();\r\n\t\t\tthis._lastSpriteFrameTime = 0;\r\n\t\t}\r\n\r\n\t\tstatic get INPUT_REPEAT_MILLIS(): number {\r\n      return 200;\r\n    }\r\n\r\n\t\tprotected handleDefaultKeys() {\r\n\r\n\t\t\t// We use a timestamp instead of game.playTime since game.playTime gets\r\n\t\t\t// reset, which messes us up\r\n\t\t\tconst time: number = gtp.Utils.timestamp();// this.game.playTime;\r\n\t\t\tconst im: gtp.InputManager = this.game.inputManager;\r\n\r\n\t\t\tif (time > (this._lastConfigKeypressTime + _BaseState.INPUT_REPEAT_MILLIS)) {\r\n\r\n\t\t\t\t// Audio stuff\r\n\t\t\t\tif (im.isKeyDown(gtp.Keys.KEY_M, true)) {\r\n\t\t\t\t\tgame.toggleMuted();\r\n\t\t\t\t\tthis._lastConfigKeypressTime = time;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Debugging actions\r\n\t\t\t\tif (im.isKeyDown(gtp.Keys.KEY_Z)) {\r\n\r\n\t\t\t\t\t// Increase canvas size\r\n\t\t\t\t\tif (im.isKeyDown(gtp.Keys.KEY_P, true)) {\r\n\t\t\t\t\t\tif (!game.canvas.style.width) {\r\n\t\t\t\t\t\t\tgame.canvas.style.width = game.canvas.width + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!game.canvas.style.height) {\r\n\t\t\t\t\t\t\tgame.canvas.style.height = game.canvas.height + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.canvas.style.width = (parseInt(game.canvas.style.width.substring(0, game.canvas.style.width.length - 2), 10) + 1) + 'px';\r\n\t\t\t\t\t\tgame.canvas.style.height = (parseInt(game.canvas.style.height.substring(0, game.canvas.style.height.length - 2), 10) + 1) + 'px';\r\n\t\t\t\t\t\tgame.setStatusMessage('Canvas size now: (' + game.canvas.style.width + ', ' + game.canvas.style.height + ')');\r\n\t\t\t\t\t\tthis._lastConfigKeypressTime = time;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Decrease canvas size\r\n\t\t\t\t\telse if (im.isKeyDown(gtp.Keys.KEY_L, true)) {\r\n\t\t\t\t\t\tif (!game.canvas.style.width) {\r\n\t\t\t\t\t\t\tgame.canvas.style.width = game.canvas.width + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!game.canvas.style.height) {\r\n\t\t\t\t\t\t\tgame.canvas.style.height = game.canvas.height + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgame.canvas.style.width = (parseInt(game.canvas.style.width.substring(0, game.canvas.style.width.length - 2), 10) - 1) + 'px';\r\n\t\t\t\t\t\tgame.canvas.style.height = (parseInt(game.canvas.style.height.substring(0, game.canvas.style.height.length - 2), 10) - 1) + 'px';\r\n\t\t\t\t\t\tgame.setStatusMessage('Canvas size now: (' + game.canvas.style.width + ', ' + game.canvas.style.height + ')');\r\n\t\t\t\t\t\tthis._lastConfigKeypressTime = time;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\telse if (im.isKeyDown(gtp.Keys.KEY_G, true)) {\r\n\t\t\t\t\t\tgame.toggleGodMode();\r\n\t\t\t\t\t\tthis._lastConfigKeypressTime = time;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tprotected _updateSpriteFrames() {\r\n\t\t\tvar time = game.playTime;\r\n\t\t\t// Don't update sprite frame at each rendered frame; that would be\r\n      // too fast\r\n      if (time >= this._lastSpriteFrameTime + 100) {\r\n        this._lastSpriteFrameTime = time;\r\n        game.updateSpriteFrames();\r\n      }\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n"],"sourceRoot":"/source/"}