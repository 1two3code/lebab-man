{"version":3,"sources":["pacman/LoadingState.ts"],"names":["pacman","pacman.LoadingState","pacman.LoadingState.constructor","pacman.LoadingState.update","pacman.LoadingState.update.hexStrToInt"],"mappings":"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","file":"pacman/LoadingState.js","sourcesContent":["module pacman {\r\n  'use strict';\r\n\r\n  export class LoadingState extends _BaseState {\r\n\r\n    private _assetsLoaded: boolean;\r\n    private _loadingImage: any;\r\n\r\n    /**\r\n\t\t * State that renders while resources are loading.\r\n\t\t * @constructor\r\n\t\t */\r\n      constructor(args?: gtp.Game | gtp.BaseStateArgs) {\r\n        super(args);\r\n        this._assetsLoaded = false;\r\n      }\r\n\r\n      update(delta: number) {\r\n\r\n        this.handleDefaultKeys();\r\n\r\n        if (!this._assetsLoaded) {\r\n\r\n           this._assetsLoaded = true;\r\n           const game: gtp.Game = this.game;\r\n           const self: LoadingState = this;\r\n\r\n           // Load assets used by this state first\r\n           game.assets.addImage('loading', 'res/loadingMessage.png');\r\n           game.assets.onLoad(() => {\r\n\r\n              self._loadingImage = game.assets.get('loading');\r\n\r\n              game.assets.addImage('title', 'res/title.png');\r\n              game.assets.addSpriteSheet('font', 'res/font.png', 9,7, 0,0);\r\n              game.assets.addImage('sprites', 'res/sprite_tiles.png', true);\r\n              game.assets.addSpriteSheet('mapTiles', 'res/map_tiles.png', 8,8, 0,0);\r\n              game.assets.addSpriteSheet('points', 'res/points.png', 18,9, 0,0);\r\n              game.assets.addJson('levels', 'res/levelData.json');\r\n              game.assets.addSound(pacman.Sounds.CHASING_GHOSTS, 'res/sounds/chasing_ghosts.wav');\r\n              game.assets.addSound(pacman.Sounds.CHOMP_1, 'res/sounds/chomp_1.wav');\r\n              game.assets.addSound(pacman.Sounds.CHOMP_2, 'res/sounds/chomp_2.wav');\r\n              game.assets.addSound(pacman.Sounds.DIES, 'res/sounds/dies.wav');\r\n              game.assets.addSound(pacman.Sounds.EATING_FRUIT, 'res/sounds/eating_fruit.wav');\r\n              game.assets.addSound(pacman.Sounds.EATING_GHOST, 'res/sounds/eating_ghost.wav');\r\n              game.assets.addSound(pacman.Sounds.EXTRA_LIFE, 'res/sounds/extra_life.wav');\r\n              game.assets.addSound(pacman.Sounds.EYES_RUNNING, 'res/sounds/eyes_running.wav');\r\n              game.assets.addSound(pacman.Sounds.INTERMISSION, 'res/sounds/intermission.wav');\r\n              game.assets.addSound(pacman.Sounds.OPENING, 'res/sounds/opening.wav');\r\n              game.assets.addSound(pacman.Sounds.SIREN, 'res/sounds/siren.wav');\r\n              game.assets.addSound(pacman.Sounds.TOKEN, 'res/sounds/token.wav');\r\n              game.assets.onLoad(() => {\r\n\r\n                 // Convert level data from hex strings to numbers\r\n                 function hexStrToInt(str: string) : number { return parseInt(str, 16); }\r\n                 const levelData = game.assets.get('levels');\r\n                 for (let i: number = 0; i < levelData.length; i++) {\r\n                    for (let row: number = 0; row < levelData[i].length; row++) {\r\n                       levelData[i][row] = levelData[i][row].map(hexStrToInt);\r\n                    }\r\n                 }\r\n\r\n                 const skipTitle: string = gtp.Utils.getRequestParam('skipTitle');\r\n                 if (skipTitle !== null) { // Allow empty strings\r\n                    const pacmanGame = <pacman.PacmanGame>self.game;\r\n                    pacmanGame.startGame(0);\r\n                 }\r\n                 else {\r\n                    game.setState(new gtp.FadeOutInState(self, new pacman.TitleState()));\r\n                 }\r\n              });\r\n\r\n           });\r\n\r\n        }\r\n\r\n     }\r\n\r\n   }\r\n}\r\n"],"sourceRoot":"/source/"}