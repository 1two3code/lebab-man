{"version":3,"sources":["pacman/LoadingState.ts"],"names":["pacman","pacman.LoadingState","pacman.LoadingState.constructor","pacman.LoadingState.update","hexStrToInt"],"mappings":"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","file":"pacman/LoadingState.js","sourcesContent":["module pacman {\r\n  'use strict';\r\n\r\n  export class LoadingState extends _BaseState {\r\n\r\n    assetsLoaded: boolean;\r\n    _loadingImage: any;\r\n\r\n    /**\r\n\t\t * State that renders while resources are loading.\r\n\t\t * @constructor\r\n\t\t */\r\n      constructor(args?: gtp.Game | gtp.BaseStateArgs) {\r\n        super(args);\r\n      }\r\n\r\n      update(delta: number) {\r\n\r\n        this.handleDefaultKeys();\r\n\r\n        if (!this.assetsLoaded) {\r\n\r\n           this.assetsLoaded = true;\r\n           let game = this.game;\r\n           let self = this;\r\n\r\n           // Load assets used by this state first\r\n           game.assets.addImage('loading', 'res/loadingMessage.png');\r\n           game.assets.onLoad(function() {\r\n\r\n              self._loadingImage = game.assets.get('loading');\r\n\r\n              game.assets.addImage('title', 'res/title.png');\r\n              game.assets.addSpriteSheet('font', 'res/font.png', 9,7, 0,0);\r\n              game.assets.addImage('sprites', 'res/sprite_tiles.png', true);\r\n              game.assets.addSpriteSheet('mapTiles', 'res/map_tiles.png', 8,8, 0,0);\r\n              game.assets.addSpriteSheet('points', 'res/points.png', 18,9, 0,0);\r\n              game.assets.addJson('levels', 'res/levelData.json');\r\n              game.assets.addSound(pacman.Sounds.CHASING_GHOSTS, 'res/sounds/chasing_ghosts.wav');\r\n              game.assets.addSound(pacman.Sounds.CHOMP_1, 'res/sounds/chomp_1.wav');\r\n              game.assets.addSound(pacman.Sounds.CHOMP_2, 'res/sounds/chomp_2.wav');\r\n              game.assets.addSound(pacman.Sounds.DIES, 'res/sounds/dies.wav');\r\n              game.assets.addSound(pacman.Sounds.EATING_FRUIT, 'res/sounds/eating_fruit.wav');\r\n              game.assets.addSound(pacman.Sounds.EATING_GHOST, 'res/sounds/eating_ghost.wav');\r\n              game.assets.addSound(pacman.Sounds.EXTRA_LIFE, 'res/sounds/extra_life.wav');\r\n              game.assets.addSound(pacman.Sounds.EYES_RUNNING, 'res/sounds/eyes_running.wav');\r\n              game.assets.addSound(pacman.Sounds.INTERMISSION, 'res/sounds/intermission.wav');\r\n              game.assets.addSound(pacman.Sounds.OPENING, 'res/sounds/opening.wav');\r\n              game.assets.addSound(pacman.Sounds.SIREN, 'res/sounds/siren.wav');\r\n              game.assets.addSound(pacman.Sounds.TOKEN, 'res/sounds/token.wav');\r\n              game.assets.onLoad(function() {\r\n\r\n                 // Convert level data from hex strings to numbers\r\n                 function hexStrToInt(str: string) : number { return parseInt(str, 16); }\r\n                 let levelData = game.assets.get('levels');\r\n                 for (let i: number = 0; i < levelData.length; i++) {\r\n                    for (let row: number = 0; row < levelData[i].length; row++) {\r\n                       levelData[i][row] = levelData[i][row].map(hexStrToInt);\r\n                    }\r\n                 }\r\n\r\n                 let skipTitle = gtp.Utils.getRequestParam('skipTitle');\r\n                 if (skipTitle !== null) { // Allow empty strings\r\n                    this.getGame().startNewGame();\r\n                 }\r\n                 else {\r\n                    game.setState(new gtp.FadeOutInState(self, new pacman.TitleState()));\r\n                 }\r\n              });\r\n\r\n           });\r\n\r\n        }\r\n\r\n     }\r\n\r\n   }\r\n}\r\n"],"sourceRoot":"/source/"}