{"version":3,"sources":["pacman/TitleState.ts"],"names":["pacman","pacman.TitleState","pacman.TitleState.constructor","pacman.TitleState.enter","pacman.TitleState._initSprites","pacman.TitleState.leaving","pacman.TitleState.getGame","pacman.TitleState.handleStart","pacman.TitleState.render","pacman.TitleState._stringWidth","pacman.TitleState._renderNoSoundMessage","pacman.TitleState._renderStaticStuff","pacman.TitleState._startGame","pacman.TitleState.update"],"mappings":"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","file":"pacman/TitleState.js","sourcesContent":["module pacman {\r\n  'use strict';\r\n\r\n  export class TitleState extends _BaseState {\r\n\r\n    private _choice: number;\r\n    private _lastKeypressTime: number;\r\n\r\n    /**\r\n\t\t * State that renders the title screen.\r\n\t\t * @constructor\r\n\t\t */\r\n      constructor(args?: pacman.PacmanGame | gtp.BaseStateArgs) {\r\n        super(args);\r\n        // Initialize our sprites not just in enter() so they are positioned\r\n        // correctly while FadeOutInState is running\r\n        this._initSprites();\r\n      }\r\n\r\n      enter() {\r\n\r\n        super.enter(game);\r\n\r\n        game.canvas.addEventListener('touchstart', this.handleStart, false);\r\n        this._choice = 0;\r\n        this._lastKeypressTime = game.playTime;\r\n\r\n        this._initSprites();\r\n      }\r\n\r\n      private _initSprites() {\r\n        const pacman: Pacman = game.pacman;\r\n        pacman.setLocation(game.getWidth() / 2, 240);\r\n        pacman.direction = Direction.EAST;\r\n        const ghost: Ghost = game.getGhost(0);\r\n        ghost.setLocation(game.getWidth() / 2 - 3 * PacmanGame.SPRITE_SIZE, 240);\r\n        ghost.direction = Direction.EAST;\r\n      }\r\n\r\n      leaving(game: gtp.Game) {\r\n        game.canvas.removeEventListener('touchstart', this.handleStart, false);\r\n      }\r\n\r\n      private getGame(): PacmanGame {\r\n        return <PacmanGame>this.game;\r\n      }\r\n\r\n      handleStart() {\r\n        console.log('Yee, touch detected!');\r\n        this._startGame();\r\n      }\r\n\r\n      render(ctx: CanvasRenderingContext2D) {\r\n\r\n        let SCREEN_WIDTH: number = game.getWidth(),\r\n            SCREEN_HEIGHT: number = game.getHeight(),\r\n            charWidth: number = 9;\r\n\r\n        this._renderStaticStuff(ctx);\r\n\r\n        // Draw the menu \"choice\" arrow\r\n        // \" - 5\" to account for differently sized choices\r\n        let x: number = (SCREEN_WIDTH - charWidth * 15) / 2 - 5;\r\n        let y: number = (SCREEN_HEIGHT - 15 * 2) / 2;\r\n        this.getGame().drawString(x, y + this._choice * 15, '>');\r\n\r\n        // Draw the small and big dots\r\n        x += charWidth * 1.5;\r\n        y = 200;\r\n        game.canvas.getContext('2d').fillStyle = '#ffffff';\r\n        game.drawSmallDot(x + 3, y + 2);\r\n        y += 9;\r\n        game.drawBigDot(x, y);\r\n\r\n        // Draw the sprites\r\n        game.pacman.render(ctx);\r\n        game.getGhost(0).paint(ctx);\r\n\r\n        if (!game.audio.isInitialized()) {\r\n           this._renderNoSoundMessage();\r\n        }\r\n      }\r\n\r\n      _stringWidth(str: string): number {\r\n        return game.assets.get('font').cellW * str.length;\r\n      }\r\n\r\n      _renderNoSoundMessage() {\r\n\r\n        let w: number = game.getWidth();\r\n\r\n        let text: string = 'SOUND IS DISABLED AS';\r\n        let x: number = (w - this._stringWidth(text)) / 2;\r\n        let y: number = game.getHeight() - 20 - 9*3;\r\n        this.getGame().drawString(x, y, text);\r\n        text = 'YOUR BROWSER DOES NOT';\r\n        x = ( w - this._stringWidth(text)) / 2;\r\n        y += 9;\r\n        this.getGame().drawString(x, y, text);\r\n        text = 'SUPPORT WEB AUDIO';\r\n        x = (w - this._stringWidth(text)) / 2;\r\n        y += 9;\r\n        this.getGame().drawString(x, y, text);\r\n      }\r\n\r\n      // TODO: Move this stuff into an image that gets rendered each frame?\r\n      _renderStaticStuff(ctx: CanvasRenderingContext2D) {\r\n\r\n        const game: gtp.Game = this.game;\r\n        game.clearScreen('rgb(0,0,0)');\r\n        const SCREEN_WIDTH: number = game.getWidth();\r\n        const charWidth: number = 9;\r\n\r\n        // Render the \"scores\" stuff at the top.\r\n        (<PacmanGame>game).drawScores(ctx);\r\n        (<PacmanGame>game).drawScoresHeaders(ctx);\r\n        \r\n        // Title image\r\n        let titleImage = game.assets.get('title');\r\n        let x: number = (SCREEN_WIDTH - titleImage.width) / 2;\r\n        let y: number = titleImage.height * 1.2;\r\n        titleImage.draw(ctx, x, y);\r\n\r\n        // Game menu\r\n        let temp: string = 'STANDARD MAZE';\r\n        let charCount: number = temp.length - 1; // \"-1\" for selection arrow\r\n        // \" - 5\" to account for differently sized choices\r\n        x = (SCREEN_WIDTH - charWidth * charCount) / 2 - 5;\r\n        y = (game.getHeight() - 15 * 2) / 2;\r\n        this.getGame().drawString(x, y, temp, ctx);\r\n        temp = 'ALTERNATE MAZE';\r\n        y += 15;\r\n        this.getGame().drawString(x, y, temp, ctx);\r\n\r\n        // Scores for the dot types\r\n        x += charWidth * 2;\r\n        temp = '10 POINTS';\r\n        charCount = temp.length - 2; // \"-2\" for animated dots\r\n        y = 200;\r\n        this.getGame().drawString(x, y, temp, ctx);\r\n        temp = '50 POINTS';\r\n        y += 9;\r\n        this.getGame().drawString(x, y, temp, ctx);\r\n\r\n        // Copyright\r\n        temp = '2015 OLD MAN GAMES';\r\n        x = (SCREEN_WIDTH - charWidth * temp.length) / 2;\r\n        y = game.getHeight() - 20;\r\n        this.getGame().drawString(x, y, temp, ctx);\r\n      }\r\n\r\n      _startGame() {\r\n        game.startGame(this._choice);\r\n      }\r\n\r\n      update(delta: number) {\r\n\r\n        this.handleDefaultKeys();\r\n\r\n        let playTime: number = game.playTime;\r\n        if (playTime > this._lastKeypressTime + _BaseState.INPUT_REPEAT_MILLIS + 100) {\r\n\r\n          let im: gtp.InputManager = game.inputManager;\r\n\r\n          if (im.up()) {\r\n             this._choice = Math.abs(this._choice - 1);\r\n             game.audio.playSound(Sounds.TOKEN);\r\n             this._lastKeypressTime = playTime;\r\n          }\r\n          else if (im.down()) {\r\n             this._choice = (this._choice + 1) % 2;\r\n             game.audio.playSound(Sounds.TOKEN);\r\n             this._lastKeypressTime = playTime;\r\n          }\r\n          else if (im.enter(true)) {\r\n             this._startGame();\r\n          }\r\n        }\r\n\r\n        let pacman: Pacman = game.pacman;\r\n        let ghost: Ghost = game.getGhost(0);\r\n\r\n    \t\t// Update the animated Pacman\r\n    \t\tlet moveAmount: number = pacman.moveAmount;\r\n    \t\tif (pacman.direction === Direction.WEST) {\r\n    \t\t\tmoveAmount = -moveAmount;\r\n    \t\t}\r\n    \t\tpacman.incX(moveAmount);\r\n    \t\tmoveAmount = ghost.moveAmount;\r\n    \t\tif (ghost.direction === Direction.WEST) {\r\n    \t\t\tmoveAmount = -moveAmount;\r\n    \t\t}\r\n    \t\tghost.incX(moveAmount);\r\n\r\n    \t\t// Check whether it's time to turn around\r\n        if (pacman.x + pacman.width >= this.game.getWidth() - 30) {\r\n          pacman.direction = ghost.direction = Direction.WEST;\r\n    \t\t}\r\n    \t\telse if (ghost.x <= 30) {\r\n          pacman.direction = ghost.direction = Direction.EAST;\r\n    \t\t}\r\n\r\n    \t\tpacman.updateFrame();\r\n    \t\tghost.updateFrame();\r\n      }\r\n  }\r\n}\r\n"],"sourceRoot":"/source/"}