{"version":3,"sources":["../app/pacman/Inky.ts"],"names":[],"mappings":"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","file":"Inky.js","sourcesContent":["module pacman {\r\n    'use strict';\r\n\r\n    /**\r\n     * Inky, the blue ghost.  Inky is \"bashful\" and only changes after Pacman if\r\n     * Blinky (the reg ghost) is close by.\r\n     */\r\n    export class Inky extends Ghost {\r\n\r\n        /**\r\n         * Constructor.\r\n         */\r\n        constructor(game: PacmanGame) {\r\n            super(game, 1 * PacmanGame.SPRITE_SIZE, 8);\r\n        }\r\n\r\n        reset() {\r\n            super.reset();\r\n            this.direction = Direction.SOUTH;\r\n            this.setLocation(12 * PacmanGame.TILE_SIZE - PacmanGame.TILE_SIZE / 2 - 4,\r\n                15 * PacmanGame.TILE_SIZE - PacmanGame.TILE_SIZE / 2);\r\n            this.motionState = MotionState.IN_BOX;\r\n        }\r\n\r\n        updatePositionChasingPacman(maze: Maze) {\r\n\r\n            let moveAmount: number = this.moveAmount;\r\n\r\n            if (this.atIntersection(maze)) { // If the ghost can turn...\r\n\r\n                // Get Blinky's proximity\r\n                let row: number = this.row;\r\n                let col: number = this.column;\r\n                let blinky: Ghost = game.getGhost(0);\r\n                let blinkyRow: number = blinky.row;\r\n                let blinkyCol: number = blinky.column;\r\n                let distSq: number = (blinkyCol - col) * (blinkyCol - col) +\r\n                    (blinkyRow - row) * (blinkyRow - row);\r\n                //console.log(distSq);\r\n\r\n                // If we're close enough to Blinky, chase Pacman.\r\n                if (distSq <= 35) {\r\n                    let toRow: number = game.pacman.row;\r\n                    let toCol: number = game.pacman.column;\r\n                    let node: MazeNode = maze.getPathBreadthFirst(row, col, toRow, toCol);\r\n                    //console.log(\"... \" + node + \" (\" + row + \",\" + col + \")\");\r\n                    if (node == null) { // Happens only with \"God Mode\" enabled.\r\n                        this.changeDirectionFallback(maze);\r\n                    }\r\n                    else if (node.col < col) {\r\n                        this.direction = Direction.WEST;\r\n                        this.incX(-moveAmount);\r\n                    }\r\n                    else if (node.col > col) {\r\n                        this.direction = Direction.EAST;\r\n                        this.incX(moveAmount);\r\n                    }\r\n                    else if (node.row < row) {\r\n                        this.direction = Direction.NORTH;\r\n                        this.incY(-moveAmount);\r\n                    }\r\n                    else if (node.row > row) {\r\n                        this.direction = Direction.SOUTH;\r\n                        this.incY(moveAmount);\r\n                    }\r\n                }\r\n\r\n                // If Blinky is too far away, just pick a random direction.\r\n                else {\r\n                    this.changeDirectionFallback(maze);\r\n                }\r\n\r\n            }\r\n\r\n            // Not at an intersection, so we should be able to keep going\r\n            // in our current direction.\r\n            else {\r\n                this.continueInCurrentDirection(moveAmount);\r\n            }\r\n\r\n            // Switch over to scatter mode if it's time to do so.\r\n            if (game.playTime >= this.startScatteringTime) {\r\n                this.motionState = MotionState.SCATTERING;\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n}\r\n"]}