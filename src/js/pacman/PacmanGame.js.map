{"version":3,"sources":["pacman/PacmanGame.ts"],"names":["pacman","pacman.PacmanGame","pacman.PacmanGame.constructor","pacman.PacmanGame.drawBigDot","pacman.PacmanGame.drawScores","pacman.PacmanGame.drawSmallDot","pacman.PacmanGame.drawSprite","pacman.PacmanGame.drawString","pacman.PacmanGame.level","pacman.PacmanGame.lives","pacman.PacmanGame.paintPointsEarned","pacman.PacmanGame.startGame"],"mappings":"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","file":"pacman/PacmanGame.js","sourcesContent":["module pacman {\r\n  'use strict';\r\n\r\n  export class PacmanGame extends gtp.Game {\r\n\r\n    private _highScore: number;\r\n    private _lives: number;\r\n    private _score: number;\r\n    private _level: number;\r\n    pacman: pacman.Pacman;\r\n\r\n    constructor(args?: any) {\r\n      super(args);\r\n      this._highScore = 0;\r\n      this.pacman = new pacman.Pacman();\r\n    }\r\n\r\n    drawBigDot(x: number, y: number) {\r\n      var ms = this.playTime;\r\n      if (ms < 0 || (ms % 500) > 250) {\r\n         var ctx = this.canvas.getContext('2d');\r\n         var sx = 135,\r\n             sy = 38;\r\n         game.assets.get('sprites').drawScaled2(ctx, sx,sy,8,8, x,y,8,8);\r\n      }\r\n    }\r\n\r\n    drawScores(ctx: CanvasRenderingContext2D) {\r\n\r\n      var scoreStr = this._score.toString();\r\n      var x = 55 - scoreStr.length * 8;\r\n      var y = 10;\r\n      this.drawString(x,y, scoreStr, ctx);\r\n\r\n      scoreStr = this._highScore.toString();\r\n      x = 132 - scoreStr.length * 8;\r\n      this.drawString(x,y, scoreStr, ctx);\r\n    }\r\n\r\n    drawSmallDot(x: number, y: number) {\r\n      var ctx = this.canvas.getContext('2d');\r\n      ctx.fillRect(x, y, 2, 2);\r\n    }\r\n\r\n    drawSprite(dx: number, dy: number, sx: number, sy: number) {\r\n      var image = game.assets.get('sprites');\r\n      var ctx = this.canvas.getContext('2d');\r\n      image.drawScaled2(ctx, sx,sy,16,16, dx,dy,16,16);\r\n    }\r\n\r\n    drawString(x: number, y: number, text: string|number,\r\n        ctx: CanvasRenderingContext2D = game.canvas.getContext('2d')) {\r\n\r\n      var str = text.toString(); // Allow us to pass in stuff like numerics\r\n\r\n      // Note we have a gtp.SpriteSheet, not a gtp.BitmapFont, so our\r\n      // calculation of what sub-image to draw is a little convoluted\r\n      var fontImage = this.assets.get('font');\r\n      var alphaOffs = 'A'.charCodeAt(0);\r\n      var numericOffs = '0'.charCodeAt(0);\r\n      var index: number;\r\n\r\n      for (var i = 0; i < str.length; i++) {\r\n\r\n         var ch = str[i];\r\n         var chCharCode = str.charCodeAt(i);\r\n         if (ch >= 'A' && ch <= 'Z') {\r\n            index = fontImage.colCount + (chCharCode - alphaOffs);\r\n         }\r\n         else if (ch >= '0' && ch <= '9') {\r\n            index = chCharCode - numericOffs;\r\n         }\r\n         else {\r\n            switch (ch) {\r\n               case '-':\r\n                  index = 10;\r\n                  break;\r\n               case '.':\r\n                  index = 11;\r\n                  break;\r\n               case '>':\r\n                  index = 12;\r\n                  break;\r\n               case '@':\r\n                  index = 13;\r\n                  break;\r\n               case '!':\r\n                  index = 14;\r\n                  break;\r\n               default:\r\n                  index = 15; // whitespace\r\n                  break;\r\n            }\r\n         }\r\n         fontImage.drawByIndex(ctx, x, y, index);\r\n         x += 9;//CHAR_WIDTH\r\n      }\r\n    }\r\n\r\n    get level(): number {\r\n      return this._level;\r\n    }\r\n\r\n    get lives() : number {\r\n      return this._lives;\r\n    }\r\n\r\n    /**\r\n     * Paints the \"points earned,\" for example, when PacMan eats a ghost or\r\n     * fruit.\r\n     *\r\n     * @param {CanvasContext2D} ctx The graphics context to use.\r\n     * @param {int} ptsIndex The index into the points array.\r\n     * @param {int} dx The x-coordinate at which to draw.\r\n     * @param {int} dy The y-coordinate at which to draw.\r\n     */\r\n    paintPointsEarned(ctx: CanvasRenderingContext2D, ptsIndex: number, dx: number, dy: number) {\r\n          'use strict';\r\n //         var y = 9 * ptsIndex;\r\n //         this._ptsImage.drawScaled2(ctx, 0,y, 17,9, dx,dy, 17,9);\r\n    }\r\n\r\n    startGame(level: number) {\r\n\r\n        this._lives = 3;\r\n        this._score = 0;\r\n        this._level = 0;\r\n\r\n        var levelData = game.assets.get('levels')[level];\r\n        var mazeState = new pacman.MazeState(levelData);\r\n        //this.setState(new gtp.FadeOutInState(this.state, mazeState));\r\n        this.setState(mazeState); // The original did not fade in/out\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"/source/"}