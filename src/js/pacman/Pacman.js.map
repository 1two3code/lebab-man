{"version":3,"sources":["pacman/Pacman.ts"],"names":["pacman","pacman.Pacman","pacman.Pacman.constructor","pacman.Pacman.getUpdateDelayMillis","pacman.Pacman.handleInput","pacman.Pacman.incDying","pacman.Pacman.render","pacman.Pacman.reset","pacman.Pacman.setLocation","pacman.Pacman.startDying","pacman.Pacman.updatePositionImpl"],"mappings":";;;;;AAAA,IAAO,MAAM,CAkHZ;AAlHD,WAAO,MAAM,EAAC,CAAC;IACbA,YAAYA,CAACA;IAEbA;QAA4BC,0BAAWA;QAIrCA;YACEC,kBAAMA,CAACA,CAACA,CAACA;YACTA,IAAIA,CAACA,WAAWA,GAAGA,CAACA,CAACA;QACvBA,CAACA;QAEDD,qCAAoBA,GAApBA;YACEE,MAAMA,CAACA,EAAEA,CAACA;QACZA,CAACA;QAEDF,4BAAWA,GAAXA,UAAYA,IAAUA;YAEpBG,IAAIA,KAAKA,GAAGA,IAAIA,CAACA,YAAYA,CAACA;YAE9BA,EAAEA,CAACA,CAACA,KAAKA,CAACA,IAAIA,EAAEA,CAACA,CAACA,CAACA;gBACjBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,cAAcA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA;oBAC9BA,IAAIA,CAACA,SAASA,GAAGA,gBAASA,CAACA,IAAIA,CAACA;gBAClCA,CAACA;YACHA,CAACA;YACDA,IAAIA,CAACA,EAAEA,CAACA,CAACA,KAAKA,CAACA,KAAKA,EAAEA,CAACA,CAACA,CAACA;gBACvBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,eAAeA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA;oBAC/BA,IAAIA,CAACA,SAASA,GAAGA,gBAASA,CAACA,IAAIA,CAACA;gBAClCA,CAACA;YACHA,CAACA;YACDA,EAAEA,CAACA,CAACA,KAAKA,CAACA,EAAEA,EAAEA,CAACA,CAACA,CAACA;gBACfA,EAAEA,CAACA,CAACA,IAAIA,CAACA,YAAYA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA;oBAC5BA,IAAIA,CAACA,SAASA,GAAGA,gBAASA,CAACA,KAAKA,CAACA;gBACnCA,CAACA;YACHA,CAACA;YACDA,IAAIA,CAACA,EAAEA,CAACA,CAACA,KAAKA,CAACA,IAAIA,EAAEA,CAACA,CAACA,CAACA;gBACtBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,cAAcA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA;oBAC9BA,IAAIA,CAA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","file":"pacman/Pacman.js","sourcesContent":["module pacman {\r\n  'use strict';\r\n\r\n  export class Pacman extends _BaseSprite {\r\n\r\n    _dyingFrame: number;\r\n\r\n    constructor() {\r\n      super(3);\r\n      this._dyingFrame = 0;\r\n    }\r\n\r\n    getUpdateDelayMillis(): number {\r\n      return 10;\r\n    }\r\n\r\n    handleInput(maze: Maze) {\r\n\r\n      var input = game.inputManager;\r\n\r\n      if (input.left()) {\r\n        if (this.getCanMoveLeft(maze)) {\r\n          this.direction = Direction.WEST;\r\n        }\r\n      }\r\n      else if (input.right()) {\r\n        if (this.getCanMoveRight(maze)) {\r\n          this.direction = Direction.EAST;\r\n        }\r\n      }\r\n      if (input.up()) {\r\n        if (this.getCanMoveUp(maze)) {\r\n          this.direction = Direction.NORTH;\r\n        }\r\n      }\r\n      else if (input.down()) {\r\n        if (this.getCanMoveDown(maze)) {\r\n          this.direction = Direction.SOUTH;\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     * Returns whether Pacman ins completely dead, or still doing his dying\r\n     * animation.\r\n     * @return {boolean} Whether Pacman is still in his dying animation.\r\n     */\r\n    incDying(): boolean {\r\n      this._dyingFrame = (this._dyingFrame + 1) % 12;\r\n      return this._dyingFrame !== 0;\r\n    }\r\n\r\n    render(ctx: CanvasRenderingContext2D) {\r\n\r\n      var SPRITE_SIZE: number = PacmanGame.SPRITE_SIZE;\r\n\r\n      var x: number = this.bounds.x;\r\n      var y: number = this.bounds.y;\r\n\r\n      var srcX: number,\r\n          srcY: number;\r\n      if (this._dyingFrame > 0) {\r\n         srcX = SPRITE_SIZE * this._dyingFrame;\r\n         srcY = 96;\r\n      }\r\n      else {\r\n         srcX = this.direction * SPRITE_SIZE * this.getFrameCount() +\r\n               this.getFrame() * SPRITE_SIZE;\r\n         srcY = 80;\r\n      }\r\n\r\n      game.drawSprite(x,y, srcX,srcY);\r\n    }\r\n\r\n    reset() {\r\n\r\n      var TILE_SIZE = 8;\r\n\r\n      super.reset();\r\n      this.direction = Direction.WEST;\r\n      this.setLocation(13 * TILE_SIZE, 24 * TILE_SIZE - TILE_SIZE / 2);\r\n      this._frame = 0;\r\n    }\r\n\r\n    setLocation(x: number, y: number) {\r\n      super.setLocation(x, y);\r\n    }\r\n\r\n    startDying() {\r\n      this._dyingFrame = 1;\r\n    }\r\n\r\n    updatePositionImpl(maze: Maze) {\r\n\r\n      var moveAmount: number = this.moveAmount;\r\n\r\n  \t\tswitch (this.direction) {\r\n        case Direction.WEST:\r\n  \t\t\t\tthis.goLeftIfPossible(maze, moveAmount);\r\n  \t\t\t\tbreak;\r\n  \t\t\tcase Direction.EAST:\r\n  \t\t\t\tthis.goRightIfPossible(maze, moveAmount);\r\n  \t\t\t\tbreak;\r\n  \t\t\tcase Direction.NORTH:\r\n  \t\t\t\tthis.goUpIfPossible(maze, moveAmount);\r\n  \t\t\t\tbreak;\r\n  \t\t\tcase Direction.SOUTH:\r\n  \t\t\t\tthis.goDownIfPossible(maze, moveAmount);\r\n  \t\t\t\tbreak;\r\n  \t\t}\r\n\r\n  \t\tgame.increaseScore(maze.checkForDot(this.row, this.column));\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"/source/"}