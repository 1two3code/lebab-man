{"version":3,"sources":["pacman/Pacman.ts"],"names":["pacman","pacman.Pacman","pacman.Pacman.constructor","pacman.Pacman.getUpdateDelayMillis","pacman.Pacman.handleInput","pacman.Pacman.incDying","pacman.Pacman.render","pacman.Pacman.reset","pacman.Pacman.setLocation","pacman.Pacman.startDying","pacman.Pacman.updatePositionImpl"],"mappings":";;;;;AAAA,IAAO,MAAM,CAkHZ;AAlHD,WAAO,MAAM,EAAC,CAAC;IACXA,YAAYA,CAACA;IAEbA;QAA4BC,0BAAWA;QAInCA;YACIC,kBAAMA,CAACA,CAACA,CAACA;YACTA,IAAIA,CAACA,WAAWA,GAAGA,CAACA,CAACA;QACzBA,CAACA;QAEDD,qCAAoBA,GAApBA;YACIE,MAAMA,CAACA,EAAEA,CAACA;QACdA,CAACA;QAEDF,4BAAWA,GAAXA,UAAYA,IAAUA;YAElBG,IAAMA,KAAKA,GAAqBA,IAAIA,CAACA,YAAYA,CAACA;YAElDA,EAAEA,CAACA,CAACA,KAAKA,CAACA,IAAIA,EAAEA,CAACA,CAACA,CAACA;gBACfA,EAAEA,CAACA,CAACA,IAAIA,CAACA,cAAcA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA;oBAC5BA,IAAIA,CAACA,SAASA,GAAGA,gBAASA,CAACA,IAAIA,CAACA;gBACpCA,CAACA;YACLA,CAACA;YACDA,IAAIA,CAACA,EAAEA,CAACA,CAACA,KAAKA,CAACA,KAAKA,EAAEA,CAACA,CAACA,CAACA;gBACrBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,eAAeA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA;oBAC7BA,IAAIA,CAACA,SAASA,GAAGA,gBAASA,CAACA,IAAIA,CAACA;gBACpCA,CAACA;YACLA,CAACA;YACDA,EAAEA,CAACA,CAACA,KAAKA,CAACA,EAAEA,EAAEA,CAACA,CAACA,CAACA;gBACbA,EAAEA,CAACA,CAACA,IAAIA,CAACA,YAAYA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA;oBAC1BA,IAAIA,CAACA,SAASA,GAAGA,gBAASA,CAACA,KAAKA,CAACA;gBACrCA,CAACA;YACLA,CAACA;YACDA,IAAIA,CAACA,EAAEA,CAACA,CAACA,KAAKA,CAACA,IAAIA,EAAEA,CAACA,CAACA,CAACA;gBACpBA,EAAEA,CAACA,CAACA,IAAIA,CAACA,cAAcA,CAACA,IAAIA,CAACA,CAACA,CAACA,CAACA;oBAC5BA,IAAIA,CAA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","file":"pacman/Pacman.js","sourcesContent":["module pacman {\r\n    'use strict';\r\n\r\n    export class Pacman extends _BaseSprite {\r\n\r\n        _dyingFrame: number;\r\n\r\n        constructor() {\r\n            super(3);\r\n            this._dyingFrame = 0;\r\n        }\r\n\r\n        getUpdateDelayMillis(): number {\r\n            return 10;\r\n        }\r\n\r\n        handleInput(maze: Maze) {\r\n\r\n            const input: gtp.InputManager = game.inputManager;\r\n\r\n            if (input.left()) {\r\n                if (this.getCanMoveLeft(maze)) {\r\n                    this.direction = Direction.WEST;\r\n                }\r\n            }\r\n            else if (input.right()) {\r\n                if (this.getCanMoveRight(maze)) {\r\n                    this.direction = Direction.EAST;\r\n                }\r\n            }\r\n            if (input.up()) {\r\n                if (this.getCanMoveUp(maze)) {\r\n                    this.direction = Direction.NORTH;\r\n                }\r\n            }\r\n            else if (input.down()) {\r\n                if (this.getCanMoveDown(maze)) {\r\n                    this.direction = Direction.SOUTH;\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Returns whether Pacman ins completely dead, or still doing his dying\r\n         * animation.\r\n         * @return {boolean} Whether Pacman is still in his dying animation.\r\n         */\r\n        incDying(): boolean {\r\n            this._dyingFrame = (this._dyingFrame + 1) % 12;\r\n            return this._dyingFrame !== 0;\r\n        }\r\n\r\n        render(ctx: CanvasRenderingContext2D) {\r\n\r\n            var SPRITE_SIZE: number = PacmanGame.SPRITE_SIZE;\r\n\r\n            var x: number = this.bounds.x;\r\n            var y: number = this.bounds.y;\r\n\r\n            var srcX: number,\r\n                srcY: number;\r\n            if (this._dyingFrame > 0) {\r\n                srcX = SPRITE_SIZE * this._dyingFrame;\r\n                srcY = 96;\r\n            }\r\n            else {\r\n                srcX = this.direction * SPRITE_SIZE * this.getFrameCount() +\r\n                    this.getFrame() * SPRITE_SIZE;\r\n                srcY = 80;\r\n            }\r\n\r\n            game.drawSprite(x, y, srcX, srcY);\r\n        }\r\n\r\n        reset() {\r\n\r\n            const TILE_SIZE: number = 8;\r\n\r\n            super.reset();\r\n            this.direction = Direction.WEST;\r\n            this.setLocation(13 * TILE_SIZE, 24 * TILE_SIZE - TILE_SIZE / 2);\r\n            this._frame = 0;\r\n        }\r\n\r\n        setLocation(x: number, y: number) {\r\n            super.setLocation(x, y);\r\n        }\r\n\r\n        startDying() {\r\n            this._dyingFrame = 1;\r\n        }\r\n\r\n        updatePositionImpl(maze: Maze) {\r\n\r\n            var moveAmount: number = this.moveAmount;\r\n\r\n            switch (this.direction) {\r\n                case Direction.WEST:\r\n                    this.goLeftIfPossible(maze, moveAmount);\r\n                    break;\r\n                case Direction.EAST:\r\n                    this.goRightIfPossible(maze, moveAmount);\r\n                    break;\r\n                case Direction.NORTH:\r\n                    this.goUpIfPossible(maze, moveAmount);\r\n                    break;\r\n                case Direction.SOUTH:\r\n                    this.goDownIfPossible(maze, moveAmount);\r\n                    break;\r\n            }\r\n\r\n            game.increaseScore(maze.checkForDot(this.row, this.column));\r\n        }\r\n    }\r\n}\r\n"],"sourceRoot":"/source/"}